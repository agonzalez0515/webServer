<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>TODO</title>
         <link rel="stylesheet" type="text/css" href="/src/main/resources/index.css">
    </head>
    <body>
        <header>
            <h1 class="title">{{title}}</h1>
        </header>
        <main class="todo-listing-main">
            <section class="listing-detail">
                <p>{{text}}</p>
                <form action="/todo/{{id}}/toggle" method="post">
                    <label for="toggle">Mark as done:</label>
                    <button id="toggle" type="submit"> Done </button>
                </form>
            </section>
            <div>
                {{^done}}
                <p class="incomplete"> Not Done </p>
                {{/done}}
                {{#done}}
                <p class="complete"> DONE </p>
                {{/done}}
                <button id="delete">Delete</button>
            </div>
            <section>
                <a href="/todo/{{id}}/edit">Edit Listing</a>
                <a href="/todo" rel="collection">Back to Listings</a>
            </section>
        </main>
        <footer>
            &copy 2019 @angieg0nzalez | 8th Light Apprenticeship
        </footer>
    </body>
        <script>
        document
        .getElementById("delete")
        .addEventListener("click", (event) => {
            event.preventDefault();

            const url = '/todo/{{id}}';
            const fetchOptions = {
                method: 'DELETE',
            };

            fetch(url, fetchOptions)
            .then((res) => {
                const host = window.location.host;
                window.location.replace("http://" + host + "/todo");
                })
            });
    </script>
</html>
